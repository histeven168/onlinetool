const favoriteBtn=document.getElementById('favoriteBtn');if(favoriteBtn){favoriteBtn.addEventListener('click',function(){if(typeof iflogin!=='undefined'&&iflogin!=1){const loginDialog=setupLoginDialog();if(loginDialog){loginDialog.show()}else{showToast(_LANG.continue_by_sign,false)}return}if(this.dataset.lastClick&&Date.now()-this.dataset.lastClick<10000){showToast(_LANG.try_again_later,false);return}this.dataset.lastClick=Date.now();const icon=this.querySelector('i');const isFavorited=this.classList.contains('favorited');if(!isFavorited){this.classList.add('favorited');icon.classList.replace('fa-heart-empty','fa-heart')}const formData=new FormData();formData.append('id',tool_id);formData.append('toolname',tool_name);formData.append('img_path',tool_image);formData.append('url',tool_url);fetch(wwwdomain+'/?mod=submitFav',{method:'POST',body:formData,credentials:'include'}).then(response=>response.json()).then(data=>{if(data.success){if(data.action==='addFav'){showToast(_LANG.added_from_fav,true)}else{this.classList.remove('favorited');icon.classList.replace('fa-heart','fa-heart-empty');showToast(_LANG.removed_from_fav,true)}}else{this.classList.remove('favorited');icon.classList.replace('fa-heart','fa-heart-empty');showToast(_LANG.try_again_later,false)}}).catch(error=>{console.error('Error:',error);this.classList.remove('favorited');icon.classList.replace('fa-heart','fa-heart-empty');showToast(_LANG.try_again_later,false)})})}